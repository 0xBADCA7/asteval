

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Motivation for asteval &mdash; ASTEVAL: Minimal Python AST evaluator</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ASTEVAL: Minimal Python AST evaluator" href="index.html" />
    <link rel="prev" title="Using asteval" href="basics.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="basics.html" title="Using asteval"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ASTEVAL: Minimal Python AST evaluator</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="basics.html"
                        title="previous chapter">Using asteval</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/motivation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="motivation-for-asteval">
<h1>Motivation for asteval<a class="headerlink" href="#motivation-for-asteval" title="Permalink to this headline">Â¶</a></h1>
<p>The asteval module provides a means to evaluate a large subset of Python in
a python program, using a simple dictionary as a namespace and evaluating
strings of statements.  It is, in effect, a limited version of Python's
built-in <tt class="xref py py-func docutils literal"><span class="pre">eval()</span></tt>.  A completely fair question is: Why on earth would
anyone do this?  That is, why not simply use <tt class="xref py py-func docutils literal"><span class="pre">eval()</span></tt>, or just use
Python itself.</p>
<p>The short answer is that sometimes you want to allow evaluation of user
input, or expose a simple calculator inside a larger application.  For
this, <tt class="xref py py-func docutils literal"><span class="pre">eval()</span></tt> is pretty scary, as it exposes <em>all</em> of Python, which
can make user input difficult to trust.  Since asteval does not support the
<strong>import</strong> statement, user code cannot access the 'os' and 'sys' modules or
any functions or classes outside the provided symbol table.</p>
<p>Other missing features (modules, classes, lambda, yield, generators) are
similarly motivated.  The idea was to make a simple procedural,
mathematically-oriented language that could be embedded into larger
applications, not to write Python.</p>
<p>In fact, the asteval module grew out the the need for a simple expression
evaluator for scientific applications.  A first attempt using pyparsing,
but was error-prone and difficult to maintain.  It turned out that using
the Python ast module is so easy that adding more complex programming
constructs like conditionals, loops, exception handling, complex assignment
and slicing, and even function definition and running was fairly simple
implement.  Importantly, because parsing is done by the ast module, a whole
class of implementation errors disappears -- valid python expression will
be parsed correctly and converted into an Abstract Syntax Tree.
Furthermore, the resulting AST is fairly simple to walk through, greatly
simplifying evaluation over any other approach.  What started as a desire
for a simple expression evaluator grew into a quite useable procedural
domain-specific language for mathematical applications.</p>
<p>There is no claim of speed in asteval.  Clearly, evaluating the ast tree
involves a lot of function calls, and will likely be slower than Python.
In preliminary tests, it's about 4x slower than Python.</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="basics.html" title="Using asteval"
             >previous</a> |</li>
        <li><a href="index.html">ASTEVAL: Minimal Python AST evaluator</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Matthew Newville, The University of Chicago.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>